<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹´é¾„è®¡ç®—å™¨ - ç”Ÿæ´»è®¡ç®—å®å…¸</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="../../layout.css">
    <link rel="stylesheet" href="../../components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="../../favicon.ico" type="image/x-icon">
</head>
<body class="app">
    <header class="app-header">
        <div class="container">
            <nav class="navbar">
                <div class="navbar-mobile">
                    <a href="../../pages/fun.html" class="navbar-back">
                        <i class="fas fa-arrow-left"></i>
                    </a>
                    <div class="navbar-title">å¹´é¾„è®¡ç®—å™¨</div>
                    <div></div>
                </div>
                
                <div class="navbar-desktop">
                    <a href="../../index.html" class="logo">
                        <i class="fas fa-calculator"></i>
                        <span class="logo-text">ç”Ÿæ´»è®¡ç®—å®å…¸</span>
                    </a>
                    <div class="nav-links">
                        <a href="../../index.html" class="nav-link">é¦–é¡µ</a>
                        <a href="../../pages/fun.html" class="nav-link active">è¶£å‘³å·¥å…·</a>
                        <a href="../../pages/tools.html" class="nav-link">æ‰€æœ‰å·¥å…·</a>
                    </div>
                    <div class="theme-toggle">
                        <button class="theme-btn" aria-label="åˆ‡æ¢ä¸»é¢˜">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="app-main">
        <section class="section">
            <div class="container">
                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                <nav class="breadcrumb">
                    <a href="../../index.html" class="breadcrumb-link">é¦–é¡µ</a>
                    <span class="breadcrumb-divider"><i class="fas fa-chevron-right"></i></span>
                    <a href="../../pages/fun.html" class="breadcrumb-link">è¶£å‘³å·¥å…·</a>
                    <span class="breadcrumb-divider"><i class="fas fa-chevron-right"></i></span>
                    <span class="breadcrumb-current">å¹´é¾„è®¡ç®—å™¨</span>
                </nav>
                
                <!-- è®¡ç®—å™¨å®¹å™¨ -->
                <div class="calculator-container">
                    <div class="calculator-card">
                        <div class="calculator-header">
                            <h1 class="calculator-title">å¹´é¾„è®¡ç®—å™¨</h1>
                            <p class="calculator-description">
                                ç²¾ç¡®è®¡ç®—ä»å‡ºç”Ÿæ—¥æœŸåˆ°ä»Šå¤©çš„å¹´é¾„ï¼Œæ˜¾ç¤ºå¹´ã€æœˆã€æ—¥ã€‚
                            </p>
                        </div>
                        
                        <!-- è¾“å…¥åŒºåŸŸ -->
                        <div class="input-group">
                            <label class="input-label">å‡ºç”Ÿæ—¥æœŸ</label>
                            <input type="date" id="birthDate" class="input-field" value="1990-01-01">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">è®¡ç®—æ—¥æœŸ</label>
                            <select id="calcDateType" class="input-field">
                                <option value="today">ä»Šå¤©</option>
                                <option value="custom">è‡ªå®šä¹‰æ—¥æœŸ</option>
                            </select>
                        </div>
                        
                        <div class="input-group" id="customDateGroup" style="display: none;">
                            <label class="input-label">é€‰æ‹©æ—¥æœŸ</label>
                            <input type="date" id="customDate" class="input-field" value="2026-12-31">
                        </div>
                        
                        <!-- è®¡ç®—æŒ‰é’® -->
                        <button class="btn btn-primary btn-block calc-btn" id="calculateBtn">
                            <i class="fas fa-birthday-cake"></i> è®¡ç®—å¹´é¾„
                        </button>
                        
                        <!-- ç»“æœå±•ç¤º -->
                        <div class="result-display" id="resultSection">
                            <h3 class="result-title"><i class="fas fa-chart-bar"></i> å¹´é¾„ç»“æœ</h3>
                            
                            <div style="text-align: center; padding: 1rem 0;">
                                <div style="font-size: 3rem; font-weight: 700; color: var(--primary); line-height: 1.2;" id="ageDisplay">
                                    36 å²
                                </div>
                            </div>
                            
                            <div class="result-grid">
                                <div class="result-item">
                                    <span class="result-label">å‡ºç”Ÿæ—¥æœŸ</span>
                                    <span class="result-value" id="resultBirthDate">1990-01-01</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">è®¡ç®—æ—¥æœŸ</span>
                                    <span class="result-value" id="resultTargetDate">2026-02-13</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">å¹´é¾„</span>
                                    <span class="result-value" id="resultAge">36 å²</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">ç²¾ç¡®å¹´é¾„</span>
                                    <span class="result-value" id="resultExactAge">36å² 1ä¸ªæœˆ 12å¤©</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">æ€»å¤©æ•°</span>
                                    <span class="result-value" id="resultTotalDays">13215 å¤©</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">æ€»å‘¨æ•°</span>
                                    <span class="result-value" id="resultTotalWeeks">1888 å‘¨</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">æ€»æœˆæ•°</span>
                                    <span class="result-value" id="resultTotalMonths">433 ä¸ªæœˆ</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">ä¸‹æ¬¡ç”Ÿæ—¥</span>
                                    <span class="result-value" id="resultNextBirthday">2027-01-01</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">è·ç¦»ç”Ÿæ—¥</span>
                                    <span class="result-value" id="resultDaysToBirthday">322 å¤©</span>
                                </div>
                            </div>
                            
                            <!-- ç”Ÿè‚–æ˜Ÿåº§ -->
                            <div style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                                <div class="badge" id="zodiacSign">â™‘ æ‘©ç¾¯åº§</div>
                                <div class="badge" id="chineseZodiac">ğŸ é©¬</div>
                            </div>
                            
                            <!-- é”™è¯¯ä¿¡æ¯ -->
                            <div class="alert alert-danger" id="errorMessage" style="display: none;">
                                <i class="fas fa-exclamation-triangle"></i> <span id="errorText">å‡ºç”Ÿæ—¥æœŸä¸èƒ½æ™šäºä»Šå¤©</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å¿«é€Ÿé¢„è®¾ -->
                    <div class="coupon-tips mt-6">
                        <h3 class="section-title" style="font-size: 1.25rem; text-align: center; margin-bottom: 1rem;">
                            <i class="fas fa-bolt"></i> å¸¸ç”¨å¹´é¾„
                        </h3>
                        <div class="tips-grid">
                            <button class="tip-item preset-btn" data-year="1990" data-month="1" data-day="1">
                                <div class="tip-icon"><i class="fas fa-user"></i></div>
                                <div class="tip-content"><h4>90å</h4><p>1990-01-01</p></div>
                            </button>
                            <button class="tip-item preset-btn" data-year="2000" data-month="1" data-day="1">
                                <div class="tip-icon"><i class="fas fa-user-graduate"></i></div>
                                <div class="tip-content"><h4>00å</h4><p>2000-01-01</p></div>
                            </button>
                            <button class="tip-item preset-btn" data-year="2010" data-month="1" data-day="1">
                                <div class="tip-icon"><i class="fas fa-child"></i></div>
                                <div class="tip-content"><h4>10å</h4><p>2010-01-01</p></div>
                            </button>
                            <button class="tip-item preset-btn" data-year="2020" data-month="1" data-day="1">
                                <div class="tip-icon"><i class="fas fa-baby"></i></div>
                                <div class="tip-content"><h4>20å</h4><p>2020-01-01</p></div>
                            </button>
                        </div>
                    </div>
                    
                    <!-- ä½¿ç”¨è¯´æ˜ -->
                    <div class="alert alert-info mt-6">
                        <div class="flex items-center">
                            <i class="fas fa-lightbulb mr-3"></i>
                            <div>
                                <strong>ä½¿ç”¨è¯´æ˜ï¼š</strong> 
                                <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                    <li><strong>ç²¾ç¡®è®¡ç®—</strong>ï¼šæ˜¾ç¤ºå¹´ã€æœˆã€å¤©ï¼Œè€ƒè™‘é—°å¹´å’Œæœˆä»½å·®å¼‚</li>
                                    <li><strong>å¤šç§å•ä½</strong>ï¼šåŒæ—¶æ˜¾ç¤ºæ€»å¤©æ•°ã€æ€»å‘¨æ•°ã€æ€»æœˆæ•°</li>
                                    <li><strong>ç”Ÿæ—¥æé†’</strong>ï¼šæ˜¾ç¤ºä¸‹æ¬¡ç”Ÿæ—¥æ—¥æœŸå’Œå‰©ä½™å¤©æ•°</li>
                                    <li><strong>ç”Ÿè‚–æ˜Ÿåº§</strong>ï¼šè‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”çš„æ˜Ÿåº§å’Œç”Ÿè‚–</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="app-footer">...</footer>
    <nav class="mobile-bottom-nav">...</nav>

    <style>
        .badge {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border-radius: 2rem;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .preset-btn { cursor: pointer; transition: all var(--transition); border: 1px solid var(--border-light); background: var(--bg-primary); width: 100%; text-align: left; }
        .preset-btn:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); border-color: var(--primary); }
    </style>

    <script>
        // æ˜Ÿåº§æ•°æ®
        const zodiacSigns = [
            { name: 'â™‘ æ‘©ç¾¯åº§', start: [12, 22], end: [1, 19] },
            { name: 'â™’ æ°´ç“¶åº§', start: [1, 20], end: [2, 18] },
            { name: 'â™“ åŒé±¼åº§', start: [2, 19], end: [3, 20] },
            { name: 'â™ˆ ç™½ç¾Šåº§', start: [3, 21], end: [4, 19] },
            { name: 'â™‰ é‡‘ç‰›åº§', start: [4, 20], end: [5, 20] },
            { name: 'â™Š åŒå­åº§', start: [5, 21], end: [6, 20] },
            { name: 'â™‹ å·¨èŸ¹åº§', start: [6, 21], end: [7, 22] },
            { name: 'â™Œ ç‹®å­åº§', start: [7, 23], end: [8, 22] },
            { name: 'â™ å¤„å¥³åº§', start: [8, 23], end: [9, 22] },
            { name: 'â™ å¤©ç§¤åº§', start: [9, 23], end: [10, 22] },
            { name: 'â™ å¤©èåº§', start: [10, 23], end: [11, 21] },
            { name: 'â™ å°„æ‰‹åº§', start: [11, 22], end: [12, 21] }
        ];
        
        // ç”Ÿè‚–æ•°æ®
        const chineseZodiac = ['ğŸ­ é¼ ', 'ğŸ® ç‰›', 'ğŸ¯ è™', 'ğŸ° å…”', 'ğŸ² é¾™', 'ğŸ è›‡', 'ğŸ´ é©¬', 'ğŸ‘ ç¾Š', 'ğŸµ çŒ´', 'ğŸ” é¸¡', 'ğŸ¶ ç‹—', 'ğŸ· çŒª'];
        
        // è·å–ä»Šå¤©æ—¥æœŸå­—ç¬¦ä¸²
        function getTodayString() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // è§£ææ—¥æœŸ
        function parseDate(dateString) {
            const [year, month, day] = dateString.split('-').map(Number);
            return new Date(year, month - 1, day);
        }
        
        // æ ¼å¼åŒ–æ—¥æœŸ
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // è®¡ç®—å¹´é¾„
        function calculateAge(birthStr, targetStr) {
            const birth = parseDate(birthStr);
            const target = parseDate(targetStr);
            
            if (birth > target) {
                throw new Error('å‡ºç”Ÿæ—¥æœŸä¸èƒ½æ™šäºè®¡ç®—æ—¥æœŸ');
            }
            
            let years = target.getFullYear() - birth.getFullYear();
            let months = target.getMonth() - birth.getMonth();
            let days = target.getDate() - birth.getDate();
            
            if (days < 0) {
                months--;
                const lastMonth = new Date(target.getFullYear(), target.getMonth(), 0);
                days += lastMonth.getDate();
            }
            
            if (months < 0) {
                years--;
                months += 12;
            }
            
            // æ€»å¤©æ•°
            const diffTime = target - birth;
            const totalDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            const totalWeeks = Math.floor(totalDays / 7);
            const totalMonths = years * 12 + months;
            
            return { years, months, days, totalDays, totalWeeks, totalMonths };
        }
        
        // è·å–æ˜Ÿåº§
        function getZodiacSign(month, day) {
            for (const sign of zodiacSigns) {
                if ((month === sign.start[0] && day >= sign.start[1]) || 
                    (month === sign.end[0] && day <= sign.end[1]) ||
                    (sign.start[0] > sign.end[0] && (month > sign.start[0] || month < sign.end[0]))) {
                    return sign.name;
                }
            }
            return 'â™‘ æ‘©ç¾¯åº§';
        }
        
        // è·å–ç”Ÿè‚–
        function getChineseZodiac(year) {
            return chineseZodiac[(year - 4) % 12];
        }
        
        // è®¡ç®—ä¸‹æ¬¡ç”Ÿæ—¥
        function getNextBirthday(birthStr, targetStr) {
            const birth = parseDate(birthStr);
            const target = parseDate(targetStr);
            
            const nextBirthday = new Date(target.getFullYear(), birth.getMonth(), birth.getDate());
            
            if (nextBirthday < target) {
                nextBirthday.setFullYear(target.getFullYear() + 1);
            }
            
            const daysToBirthday = Math.ceil((nextBirthday - target) / (1000 * 60 * 60 * 24));
            
            return {
                date: formatDate(nextBirthday),
                days: daysToBirthday
            };
        }
        
        // è®¡ç®—
        function calculate() {
            const birthDate = document.getElementById('birthDate').value;
            const calcType = document.getElementById('calcDateType').value;
            const errorMsg = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            
            errorMsg.style.display = 'none';
            
            try {
                if (!birthDate) {
                    throw new Error('è¯·é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ');
                }
                
                let targetDate;
                if (calcType === 'today') {
                    targetDate = getTodayString();
                } else {
                    targetDate = document.getElementById('customDate').value;
                    if (!targetDate) {
                        throw new Error('è¯·é€‰æ‹©è®¡ç®—æ—¥æœŸ');
                    }
                }
                
                const age = calculateAge(birthDate, targetDate);
                const nextBirthday = getNextBirthday(birthDate, targetDate);
                
                // è§£æå‡ºç”Ÿæ—¥æœŸ
                const [birthYear, birthMonth, birthDay] = birthDate.split('-').map(Number);
                
                // æ˜¾ç¤ºç»“æœ
                document.getElementById('resultBirthDate').textContent = birthDate;
                document.getElementById('resultTargetDate').textContent = targetDate;
                document.getElementById('resultAge').textContent = `${age.years} å²`;
                document.getElementById('resultExactAge').textContent = `${age.years}å² ${age.months}ä¸ªæœˆ ${age.days}å¤©`;
                document.getElementById('resultTotalDays').textContent = age.totalDays.toLocaleString() + ' å¤©';
                document.getElementById('resultTotalWeeks').textContent = age.totalWeeks.toLocaleString() + ' å‘¨';
                document.getElementById('resultTotalMonths').textContent = age.totalMonths + ' ä¸ªæœˆ';
                document.getElementById('resultNextBirthday').textContent = nextBirthday.date;
                document.getElementById('resultDaysToBirthday').textContent = nextBirthday.days + ' å¤©';
                
                // å¤§å·å¹´é¾„æ˜¾ç¤º
                document.getElementById('ageDisplay').textContent = `${age.years} å²`;
                
                // æ˜Ÿåº§ç”Ÿè‚–
                document.getElementById('zodiacSign').textContent = getZodiacSign(birthMonth, birthDay);
                document.getElementById('chineseZodiac').textContent = getChineseZodiac(birthYear);
                
            } catch (error) {
                errorText.textContent = error.message;
                errorMsg.style.display = 'block';
            }
        }
        
        // é¢„è®¾
        function applyPreset(year, month, day) {
            const dateStr = `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            document.getElementById('birthDate').value = dateStr;
            calculate();
        }
        
        // ä¸»é¢˜åˆ‡æ¢
        function initTheme() {
            const themeBtn = document.querySelector('.theme-btn');
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                if (themeBtn) themeBtn.querySelector('i').className = 'fas fa-sun';
            }
            if (themeBtn) {
                themeBtn.addEventListener('click', () => {
                    const current = document.documentElement.getAttribute('data-theme');
                    const newTheme = current === 'dark' ? 'light' : 'dark';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    themeBtn.querySelector('i').className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                });
            }
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            
            // è®¾ç½®é»˜è®¤å€¼
            document.getElementById('birthDate').value = '1990-01-01';
            document.getElementById('customDate').value = getTodayString();
            
            // è®¡ç®—ç±»å‹åˆ‡æ¢
            document.getElementById('calcDateType').addEventListener('change', function() {
                const showCustom = this.value === 'custom';
                document.getElementById('customDateGroup').style.display = showCustom ? 'block' : 'none';
                calculate();
            });
            
            // è®¡ç®—æŒ‰é’®
            document.getElementById('calculateBtn').addEventListener('click', calculate);
            
            // è¾“å…¥äº‹ä»¶
            document.querySelectorAll('input, select').forEach(el => {
                el.addEventListener('change', calculate);
            });
            
            // é¢„è®¾æŒ‰é’®
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const year = btn.dataset.year;
                    const month = btn.dataset.month;
                    const day = btn.dataset.day;
                    applyPreset(year, month, day);
                });
            });
            
            // åˆå§‹è®¡ç®—
            calculate();
        });
    </script>
</body>
</html>